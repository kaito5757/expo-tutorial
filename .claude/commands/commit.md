# Custom Command: Git Commit

このコマンドは、絵文字付きの Conventional Commit メッセージで適切にフォーマットされたコミットを作成するのに役立ちます。

## 使い方

コミットを作成するには、次のように入力します：

```bash
/commit
```

またはオプション付きで：

```bash
/commit --no-verify
```

## このコマンドの動作

1. `--no-verify`が指定されていない限り、自動的にプリコミットチェックを実行します：
   - `yarn lint` でコード品質を確保
   - `yarn build` でビルドが成功することを確認
2. `git status`でステージングされているファイルをチェック
3. ステージングされているファイルが 0 の場合、`git add`で変更されたファイルと新しいファイルをすべて自動的に追加
4. `git diff`を実行してコミットされる変更内容を理解
5. 差分を分析して、複数の異なる論理的変更が存在するかを判断
6. 複数の異なる変更が検出された場合、コミットを複数の小さなコミットに分割することを提案
7. 各コミット（または分割しない場合は単一のコミット）に対して、絵文字付き Conventional Commit フォーマットでコミットメッセージを作成

## コミットのベストプラクティス

- **コミット前の検証**: コードがリントされ、ビルドが正しく成功し、ドキュメントが更新されていることを確認
- **原子的なコミット**: 各コミットは単一の目的を果たす関連する変更を含むべき
- **大きな変更の分割**: 変更が複数の関心事に触れる場合は、別々のコミットに分割
- **Conventional Commit フォーマット**: `<タイプ>: <説明>` のフォーマットを使用。タイプは以下のいずれか：
  - `feat`: 新機能
  - `fix`: バグ修正
  - `docs`: ドキュメントの変更
  - `style`: コードスタイルの変更（フォーマットなど）
  - `refactor`: バグ修正でも機能追加でもないコード変更
  - `perf`: パフォーマンスの改善
  - `test`: テストの追加または修正
  - `chore`: ビルドプロセス、ツールなどの変更
- **命令形で記述**: コミットメッセージは命令として書く（例：「機能を追加する」を「機能を追加」と記述）
- **簡潔な 1 行目**: 最初の行は 72 文字以内に収める
- **絵文字**: 各コミットタイプには適切な絵文字が付きます：
  - ✨ `feat`: 新機能
  - 🐛 `fix`: バグ修正
  - 📝 `docs`: ドキュメント
  - 💄 `style`: フォーマット/スタイル
  - ♻️ `refactor`: コードリファクタリング
  - ⚡️ `perf`: パフォーマンス改善
  - ✅ `test`: テスト
  - 🔧 `chore`: ツール、設定
  - 🚀 `ci`: CI/CD の改善
  - 🗑️ `revert`: 変更の取り消し
  - 🧪 `test`: 失敗するテストを追加
  - 🚨 `fix`: コンパイラ/リンターの警告を修正
  - 🔒️ `fix`: セキュリティの問題を修正
  - 👥 `chore`: コントリビューターを追加または更新
  - 🚚 `refactor`: リソースを移動または名前変更
  - 🏗️ `refactor`: アーキテクチャの変更
  - 🔀 `chore`: ブランチをマージ
  - 📦️ `chore`: コンパイル済みファイルまたはパッケージを追加または更新
  - ➕ `chore`: 依存関係を追加
  - ➖ `chore`: 依存関係を削除
  - 🌱 `chore`: シードファイルを追加または更新
  - 🧑‍💻 `chore`: 開発者体験を改善
  - 🧵 `feat`: マルチスレッドまたは並行処理に関連するコードを追加または更新
  - 🔍️ `feat`: SEO を改善
  - 🏷️ `feat`: 型を追加または更新
  - 💬 `feat`: テキストやリテラルを追加または更新
  - 🌐 `feat`: 国際化とローカライゼーション
  - 👔 `feat`: ビジネスロジックを追加または更新
  - 📱 `feat`: レスポンシブデザインの作業
  - 🚸 `feat`: ユーザー体験/使いやすさを改善
  - 🩹 `fix`: 重要でない問題の簡単な修正
  - 🥅 `fix`: エラーをキャッチ
  - 👽️ `fix`: 外部 API の変更によるコードの更新
  - 🔥 `fix`: コードまたはファイルを削除
  - 🎨 `style`: コードの構造/フォーマットを改善
  - 🚑️ `fix`: 重要なホットフィックス
  - 🎉 `chore`: プロジェクトを開始
  - 🔖 `chore`: リリース/バージョンタグ
  - 🚧 `wip`: 作業中
  - 💚 `fix`: CI ビルドを修正
  - 📌 `chore`: 特定のバージョンに依存関係を固定
  - 👷 `ci`: CI ビルドシステムを追加または更新
  - 📈 `feat`: アナリティクスまたはトラッキングコードを追加または更新
  - ✏️ `fix`: タイポを修正
  - ⏪️ `revert`: 変更を元に戻す
  - 📄 `chore`: ライセンスを追加または更新
  - 💥 `feat`: 破壊的変更を導入
  - 🍱 `assets`: アセットを追加または更新
  - ♿️ `feat`: アクセシビリティを改善
  - 💡 `docs`: ソースコードにコメントを追加または更新
  - 🗃️ `db`: データベース関連の変更を実行
  - 🔊 `feat`: ログを追加または更新
  - 🔇 `fix`: ログを削除
  - 🤡 `test`: モックを作成
  - 🥚 `feat`: イースターエッグを追加または更新
  - 🙈 `chore`: .gitignore ファイルを追加または更新
  - 📸 `test`: スナップショットを追加または更新
  - ⚗️ `experiment`: 実験を実行
  - 🚩 `feat`: フィーチャーフラグを追加、更新、または削除
  - 💫 `ui`: アニメーションとトランジションを追加または更新
  - ⚰️ `refactor`: デッドコードを削除
  - 🦺 `feat`: バリデーションに関連するコードを追加または更新
  - ✈️ `feat`: オフラインサポートを改善

## コミット分割のガイドライン

差分を分析する際、以下の基準に基づいてコミットを分割することを検討してください：

1. **異なる関心事**: コードベースの無関係な部分への変更
2. **異なるタイプの変更**: 機能、修正、リファクタリングなどの混在
3. **ファイルパターン**: 異なるタイプのファイルへの変更（例：ソースコード対ドキュメント）
4. **論理的なグループ化**: 別々に理解またはレビューしやすい変更
5. **サイズ**: 分割した方が明確になる非常に大きな変更

## 例

良いコミットメッセージ：

- ✨ feat: ユーザー認証システムを追加
- 🐛 fix: レンダリングプロセスのメモリリークを解決
- 📝 docs: 新しいエンドポイントで API ドキュメントを更新
- ♻️ refactor: パーサーのエラー処理ロジックを簡素化
- 🚨 fix: コンポーネントファイルのリンター警告を解決
- 🧑‍💻 chore: 開発者ツールのセットアッププロセスを改善
- 👔 feat: トランザクション検証のビジネスロジックを実装
- 🩹 fix: ヘッダーの軽微なスタイルの不整合に対処
- 🚑️ fix: 認証フローの重要なセキュリティ脆弱性を修正
- 🎨 style: より良い可読性のためにコンポーネント構造を再編成
- 🔥 fix: 非推奨のレガシーコードを削除
- 🦺 feat: ユーザー登録フォームに入力検証を追加
- 💚 fix: 失敗している CI パイプラインテストを解決
- 📈 feat: ユーザーエンゲージメントのアナリティクストラッキングを実装
- 🔒️ fix: 認証パスワード要件を強化
- ♿️ feat: スクリーンリーダー用のフォームアクセシビリティを改善

コミット分割の例：

- 最初のコミット: ✨ feat: 新しい solc バージョンの型定義を追加
- 2 番目のコミット: 📝 docs: 新しい solc バージョンのドキュメントを更新
- 3 番目のコミット: 🔧 chore: package.json の依存関係を更新
- 4 番目のコミット: 🏷️ feat: 新しい API エンドポイントの型定義を追加
- 5 番目のコミット: 🧵 feat: ワーカースレッドの並行処理を改善
- 6 番目のコミット: 🚨 fix: 新しいコードのリンティング問題を解決
- 7 番目のコミット: ✅ test: 新しい solc バージョン機能のユニットテストを追加
- 8 番目のコミット: 🔒️ fix: セキュリティ脆弱性のある依存関係を更新

## コマンドオプション

- `--no-verify`: プリコミットチェック（lint、build）をスキップ

## 重要な注意事項

- メッセージのやり取りとコミットメッセージは全て日本語で行う。
- デフォルトでは、コード品質を確保するためにプリコミットチェック（`yarn lint`、`yarn build`）が実行されます
- これらのチェックが失敗した場合、コミットを続行するか、最初に問題を修正するかを尋ねられます
- 特定のファイルがすでにステージングされている場合、コマンドはそれらのファイルのみをコミットします
- ファイルがステージングされていない場合、すべての変更されたファイルと新しいファイルを自動的にステージングします
- コミットメッセージは、検出された変更に基づいて構築されます
- コミット前に、コマンドは差分を確認して、複数のコミットがより適切かどうかを特定します
- 複数のコミットを提案する場合、変更を個別にステージングしてコミットするのを支援します
- メッセージが変更と一致することを確認するために、常にコミット差分を確認します
